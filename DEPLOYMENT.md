# éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pagesã€‚

## ğŸš€ è‡ªåŠ¨éƒ¨ç½²è®¾ç½®

### 1. å¯ç”¨ GitHub Pages

åœ¨ GitHub ä»“åº“ä¸­è¿›è¡Œä»¥ä¸‹è®¾ç½®ï¼š

1. è¿›å…¥ä»“åº“çš„ **Settings** é¡µé¢
2. åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° **Pages**
3. åœ¨ **Source** éƒ¨åˆ†ï¼Œé€‰æ‹© **GitHub Actions**

### 2. è§¦å‘éƒ¨ç½²

éƒ¨ç½²ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è§¦å‘ï¼š

- **æ¨é€åˆ° main åˆ†æ”¯**ï¼šæ¯æ¬¡æ¨é€ä»£ç åˆ° main åˆ†æ”¯æ—¶è‡ªåŠ¨éƒ¨ç½²
- **æ‰‹åŠ¨è§¦å‘**ï¼šåœ¨ GitHub ä»“åº“çš„ Actions é¡µé¢æ‰‹åŠ¨è¿è¡Œå·¥ä½œæµ

### 3. æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

1. è¿›å…¥ä»“åº“çš„ **Actions** é¡µé¢
2. æŸ¥çœ‹æœ€æ–°çš„ "Deploy to GitHub Pages" å·¥ä½œæµè¿è¡ŒçŠ¶æ€
3. éƒ¨ç½²æˆåŠŸåï¼Œç½‘ç«™å°†åœ¨å‡ åˆ†é’Ÿå†…å¯ç”¨

### 4. è®¿é—®ç½‘ç«™

éƒ¨ç½²æˆåŠŸåï¼Œä½ çš„ç½‘ç«™å°†åœ¨ä»¥ä¸‹åœ°å€å¯ç”¨ï¼š

```
https://orpheuscn.github.io/OCR/
```

## ğŸ“ é…ç½®è¯´æ˜

### vite.config.ts

å·²é…ç½® `base` è·¯å¾„ä»¥æ”¯æŒ GitHub Pages éƒ¨ç½²ï¼š

```typescript
base: process.env.NODE_ENV === 'production' ? '/OCR/' : '/',
```

- **å¼€å‘ç¯å¢ƒ**ï¼šä½¿ç”¨æ ¹è·¯å¾„ `/`
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šä½¿ç”¨ä»“åº“åä½œä¸ºåŸºç¡€è·¯å¾„ `/OCR/`

### GitHub Actions å·¥ä½œæµ

å·¥ä½œæµæ–‡ä»¶ä½äº `.github/workflows/deploy.yml`ï¼ŒåŒ…å«ä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼š

1. **Build**ï¼šå®‰è£…ä¾èµ–å¹¶æ„å»ºé¡¹ç›®
2. **Deploy**ï¼šå°†æ„å»ºäº§ç‰©éƒ¨ç½²åˆ° GitHub Pages

## ğŸ”§ æœ¬åœ°æµ‹è¯•ç”Ÿäº§æ„å»º

åœ¨æ¨é€åˆ° GitHub ä¹‹å‰ï¼Œå¯ä»¥åœ¨æœ¬åœ°æµ‹è¯•ç”Ÿäº§æ„å»ºï¼š

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

æ³¨æ„ï¼šæœ¬åœ°é¢„è§ˆæ—¶ï¼Œç”±äº `base` è·¯å¾„çš„å·®å¼‚ï¼ŒæŸäº›èµ„æºè·¯å¾„å¯èƒ½ä¸æ­£ç¡®ã€‚è¿™æ˜¯æ­£å¸¸çš„ï¼Œéƒ¨ç½²åˆ° GitHub Pages åä¼šæ­£å¸¸å·¥ä½œã€‚

## ğŸ› æ•…éšœæ’é™¤

### éƒ¨ç½²å¤±è´¥

1. æ£€æŸ¥ Actions é¡µé¢çš„é”™è¯¯æ—¥å¿—
2. ç¡®ä¿ GitHub Pages å·²æ­£ç¡®é…ç½®ä¸ºä½¿ç”¨ GitHub Actions
3. ç¡®ä¿ä»“åº“æœ‰è¶³å¤Ÿçš„æƒé™ï¼ˆSettings > Actions > General > Workflow permissionsï¼‰

### é¡µé¢æ˜¾ç¤º 404

1. ç¡®è®¤ GitHub Pages è®¾ç½®ä¸­çš„ Source æ˜¯ "GitHub Actions"
2. ç­‰å¾…å‡ åˆ†é’Ÿè®© DNS ä¼ æ’­
3. æ£€æŸ¥ `vite.config.ts` ä¸­çš„ `base` è·¯å¾„æ˜¯å¦æ­£ç¡®

### èµ„æºåŠ è½½å¤±è´¥

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ `base` è·¯å¾„é…ç½®æ­£ç¡®
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡è¯•

## ğŸ“¦ æ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰

å¦‚æœè‡ªåŠ¨éƒ¨ç½²é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨éƒ¨ç½²ï¼š

```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. è¿›å…¥æ„å»ºç›®å½•
cd dist

# 3. åˆå§‹åŒ– git ä»“åº“
git init
git add -A
git commit -m 'deploy'

# 4. æ¨é€åˆ° gh-pages åˆ†æ”¯
git push -f git@github.com:Orpheuscn/OCR.git main:gh-pages

# 5. è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

ç„¶ååœ¨ GitHub Pages è®¾ç½®ä¸­é€‰æ‹© `gh-pages` åˆ†æ”¯ä½œä¸ºæºã€‚

## ğŸ”’ å®‰å…¨æç¤º

- **ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  API Key**
- API Key å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨çš„ localStorage ä¸­
- å»ºè®®åœ¨ Google Cloud Console ä¸­ä¸º API Key è®¾ç½® HTTP referrer é™åˆ¶ï¼š
  - `https://orpheuscn.github.io/OCR/*`
  - `http://localhost:5173/*`ï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼‰

